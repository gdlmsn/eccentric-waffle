<html lang="en">

<head>
	<meta charset="utf-8">


	<title>JOB</title>
	<script src="scripts/exif.js" type="text/javascript"></script>

</head>

<body id="dummybodyid" data-pinterest-extension-installed="cr1.39.2">
	<a href="StreamDemo.html" style="position:absolute;left:350px;">GetUserMedia Demo</a>
	<div id="container">
		<canvas width="320" height="240" id="picture"></canvas>
		<input id="Take-Picture" type="file" accept="image/*;capture=camera">
		<p id="textbit"></p>
	</div>
	<script type="text/javascript" src="scripts/JOB.js"></script>
	<script type="text/javascript">
		var takePicture = document.querySelector("#Take-Picture"),
			Result = document.querySelector("#textbit");
		JOB.Init();
		JOB.SetImageCallback(function(result) {
			if (result.length > 0) {
				var tempArray = [];
				for (var i = 0; i < result.length; i++) {
					tempArray.push(result[i].Format + " : " + result[i].Value);
				}
				Result.innerHTML = tempArray.join("<br />");
			} else {
				if (result.length === 0) {
					Result.innerHTML = "Decoding failed.";
				}
			}
		});
		JOB.PostOrientation = true;
		JOB.OrientationCallback = function(result) {
			canvas.width = result.width;
			canvas.height = result.height;
			var data = ctx.getImageData(0, 0, canvas.width, canvas.height);
			for (var i = 0; i < data.data.length; i++) {
				data.data[i] = result.data[i];
			}
			ctx.putImageData(data, 0, 0);
		};
		JOB.SwitchLocalizationFeedback(true);
		JOB.SetLocalizationCallback(function(result) {
			ctx.beginPath();
			ctx.lineWIdth = "2";
			ctx.strokeStyle = "red";
			for (var i = 0; i < result.length; i++) {
				ctx.rect(result[i].x, result[i].y, result[i].width, result[i].height);
			}
			ctx.stroke();
		});
		if (takePicture && showPicture) {
			takePicture.onchange = function(event) {
				var files = event.target.files;
				if (files && files.length > 0) {
					file = files[0];
					try {
						var URL = window.URL || window.webkitURL;
						showPicture.onload = function(event) {
							Result.innerHTML = "";
							JOB.DecodeImage(showPicture);
							URL.revokeObjectURL(showPicture.src);
						};
						showPicture.src = URL.createObjectURL(file);
					} catch (e) {
						try {
							var fileReader = new FileReader();
							fileReader.onload = function(event) {
								showPicture.onload = function(event) {
									Result.innerHTML = "";
									JOB.DecodeImage(showPicture);
								};
								showPicture.src = event.target.result;
							};
							fileReader.readAsDataURL(file);
						} catch (e) {
							Result.innerHTML = "Neither createObjectURL or FileReader are supported";
						}
					}
				}
			};
		}
	</script>


	<div id="diigo-chrome-installed" style="display: none;"></div>
	<div class="diigolet notice" id="diigolet-notice" style="display: none;">
		<div><b>&nbsp;</b>
			<p>Ok, done!</p><span id="close"></span></div>
	</div>
	<div id="diigolet-dlg-sticky" style="position: absolute; left: 100px; top: 100px; display: none;" class="diigolet diigoletFN yellow">
		<div id="diigolet-dlg-sticky-top" class="_dragHandle" style="cursor: move;"><span id="diigolet-dlg-sticky-close"></span><span id="diigolet-dlg-sticky-color"><div id="diigolet-dlg-sticky-currentColor" title="change color"></div><div id="diigolet-dlg-sticky-colorPicker" style="display: none;"><b color="yellow" id="diigolet-dlg-yellow" class="dlg-colorItem colorchecked"><b></b></b><b color="blue" id="diigolet-dlg-blue" class="dlg-colorItem"><b></b></b><b color="green" id="diigolet-dlg-green" class="dlg-colorItem"><b></b></b><b color="pink" id="diigolet-dlg-pink" class="dlg-colorItem"><b></b></b></div></span>
			<span
							id="diigolet-dlg-sticky-addTab"></span>
		</div>
		<div id="diigolet-dlg-sticky-content" class="private">
			<div id="diigolet-dlg-sticky-switcher"><span class="FN-switcher" id="FN-switcher-private"><b></b>Private</span><span class="FN-switcher" id="FN-switcher-group"><b></b>Group</span></div>
			<div class="FN-content-wrapper private">
				<textarea id="FN-private-editor" placeholder="Input here..."></textarea>
				<div id="FN-content-footer">
					<div id="editDone"><span id="FN-private-delete"><b></b></span><span id="FN-private-datetime"></span></div>
					<div id="editing"><a href="javascript:void(0)" id="FN-private-saveBtn">Save</a><a href="javascript:void(0)" id="FN-private-cancelBtn">Cancel</a></div>
				</div>
			</div>
			<div class="FN-content-wrapper group">
				<div>
					<div id="FN-group-content-nav"><span id="FN-current-group"><span>+Share to a new group</span><b></b></span>
						<div id="FN-group-menu" style="display: none;">
							<ul id="FN-group-ul"></ul>
							<ul id="FN-group-share-new-ul">
								<li id="FN-group-share-new">+Share to a new group</li>
							</ul>
						</div>
					</div>
					<div id="FN-post-form" class="">
						<div>
							<textarea id="FN-group-post" placeholder="write a comment..."></textarea>
						</div>
						<div>
							<select id="FN-group-share"></select>
							<button><span class="button-label">Post</span><span class="button-spinner"></span></button><a href="javascript:void(0)">Cancel</a></div>
					</div>
					<div id="FN-group-content">
						<div id="FN-group-content-container"></div>
						<div id="FN-group-content-postform">
							<textarea placeholder="Write a comment..."></textarea>
							<div class="post-action">
								<button><span class="button-label">Post</span><span class="button-spinner"></span></button><a href="javascript:void(0)">Cancel</a></div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div id="diigolet-csm" style="position: absolute; display: none;" class="yellow">
		<div id="diigolet-csm-research-mode"></div>
		<div id="diigolet-csm-highlight-wrapper" class="csm-btn">
			<a id="diigolet-csm-highlight" class="csm-action" href="javascript:void(0);"></a>
			<div class="diigolet-csm-color small hidden" style="height: 0px;">
				<a class="diigolet-csm-coloritem yellow" data-color="yellow" style="height: 0px;"></a>
				<a class="diigolet-csm-coloritem blue" data-color="blue" style="height: 0px;"></a>
				<a class="diigolet-csm-coloritem green" data-color="green" style="height: 0px;"></a>
				<a class="diigolet-csm-coloritem pink" data-color="pink" style="height: 0px;"></a>
			</div>
		</div>
		<div id="diigolet-csm-highlightAndComment-wrapper" class="csm-btn">
			<a id="diigolet-csm-highlightAndComment" class="csm-action" href="javascript:void(0);"></a>
			<div class="diigolet-csm-color small hidden" style="height: 0px;">
				<a class="diigolet-csm-coloritem yellow" data-color="yellow" style="height: 0px;"></a>
				<a class="diigolet-csm-coloritem blue" data-color="blue" style="height: 0px;"></a>
				<a class="diigolet-csm-coloritem green" data-color="green" style="height: 0px;"></a>
				<a class="diigolet-csm-coloritem pink" data-color="pink" style="height: 0px;"></a>
			</div>
		</div>
		<a id="diigolet-csm-search" class="csm-action" href="javascript:void(0);"></a>
	</div>
	<div id="window-resizer-tooltip" style="display: none;">
		<a href="#" title="Edit settings"></a><span class="tooltipTitle">Window size: </span><span class="tooltipWidth" id="winWidth">2491</span> x <span class="tooltipHeight" id="winHeight">1413</span>
		<br><span class="tooltipTitle">Viewport size: </span><span class="tooltipWidth" id="vpWidth">717</span> x <span class="tooltipHeight" id="vpHeight">1318</span></div>
</body>

</html>
